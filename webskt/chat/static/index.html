<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CHAT</title>
</head>
<body>
    <div id="root">
        <div class="box">

        </div>
    </div>
</body>
<script>
    ;(() => {
        let ws = new WebSocket(`ws://127.0.0.1:8080/sub`)
        // let data = {"from": "node"}
        ws.onopen = (ev) => {
            // ws.send(JSON.stringify(data))
        }
        ws.onmessage = (ev) => {
            console.log(ev.data)
            // ws.send(JSON.stringify(data))
        }
        ws.onerror = (ev) => {
            console.log(ev.reason)
        }
        ws.onclose = (ev) => {
            console.log(ev.reason)
        }
        document.onclick = () => {
            let time = new Date()
            fetch("http://127.0.0.1:8080/pub", {
                method: "POST",
                body:  time.toLocaleTimeString()
            })
        }
    })()
</script>
</html>